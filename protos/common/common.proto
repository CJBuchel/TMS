syntax = "proto3";

package tms.common;

message Timestamp {
  int64 seconds = 1; // Seconds since the Unix epoch.
  int32 nanos = 2; // Nanoseconds since the Unix epoch.
}

// Represents a date (year, month, day)
message TmsDate {
  int32 year = 1; // Year (e.g., 2024)
  int32 month = 2; // Month (1-12)
  int32 day = 3; // Day (1-31)
}

// Represents a time of day
message TmsTime {
  uint32 hour = 1; // Hour (0-23)
  uint32 minute = 2; // Minute (0-59)
  uint32 second = 3; // Second (0-59)
}

// Represents a date and/or time
// Can contain just date, just time, or both
message TmsDateTime {
  optional TmsDate date = 1;
  optional TmsTime time = 2;
}

enum Role {
  ADMIN = 0;
  REFEREE = 1;
  HEAD_REFEREE = 2;
  JUDGE = 3;
  JUDGE_ADVISOR = 4;
  SCORE_KEEPER = 5;
  EMCEE = 6;
  AV = 7;
}

enum IntegrityCode {
  // Errors
  E000 = 0;
  E001 = 1;
  E002 = 2;
  E003 = 3;
  E004 = 4;
  E005 = 5;
  E006 = 6;
  E007 = 7;
  E008 = 8;
  E009 = 9;
  E010 = 10;
  E011 = 11;
  E012 = 12;
  E013 = 13;

  // Warnings - starts at 1000 for future
  W000 = 1000;
  W001 = 1001;
  W002 = 1002;
  W003 = 1003;
  W004 = 1004;
  W005 = 1005;
  W006 = 1006;
  W007 = 1007;
  W008 = 1008;
  W009 = 1009;
  W010 = 1010;
  W011 = 1011;
  W012 = 1012;
  W013 = 1013;
  W014 = 1014;
  W015 = 1015;
  W016 = 1016;
  W017 = 1017;
  W018 = 1018;
}

enum IntegritySeverity {
  UNSPECIFIED = 0;
  ERROR = 1;
  WARNING = 2;
}

message IntegrityContext {
  repeated string context_keys = 1;
  optional string team_number = 2;
  optional string match_number = 3;
  optional string session_number = 4;
  optional string table_name = 5;
  optional string pod_name = 6;
}

message IntegrityMessage {
  IntegrityCode code = 1;
  IntegritySeverity severity = 2;
  IntegrityContext context = 3;
  string formatted_message = 4;
}
